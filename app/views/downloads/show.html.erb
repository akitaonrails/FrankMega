<div class="min-h-screen flex items-center justify-center px-4">
  <div class="w-full <%= @shared_file.previewable? ? 'max-w-2xl' : 'max-w-md' %>">
    <div class="bg-white dark:bg-dark-surface rounded-2xl shadow-xl p-8 text-center">
      <h1 class="text-3xl font-bold text-primary mb-2"><%= t("app_name") %></h1>

      <div class="my-8">
        <% if @shared_file.image? %>
          <img src="<%= download_preview_path(hash: @shared_file.download_hash) %>"
               alt="<%= @shared_file.original_filename %>"
               class="mx-auto max-w-full max-h-96 rounded-lg object-contain" />
        <% elsif @shared_file.video? %>
          <video controls autoplay muted playsinline preload="metadata"
                 class="mx-auto max-w-full max-h-96 rounded-lg">
            <source src="<%= download_preview_path(hash: @shared_file.download_hash) %>"
                    type="<%= @shared_file.content_type %>" />
            <p><%= t("downloads.show.video_not_supported") %></p>
          </video>
        <% elsif @shared_file.audio? %>
          <audio controls autoplay preload="metadata" class="w-full">
            <source src="<%= download_preview_path(hash: @shared_file.download_hash) %>"
                    type="<%= @shared_file.content_type %>" />
            <p><%= t("downloads.show.audio_not_supported") %></p>
          </audio>
        <% else %>
          <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
          </svg>
        <% end %>
      </div>

      <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-2 truncate" title="<%= @shared_file.original_filename %>"><%= truncate(@shared_file.original_filename, length: 60) %></h2>

      <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-6 text-sm">
        <dl class="space-y-2">
          <div class="flex justify-between">
            <dt class="text-gray-500 dark:text-gray-400"><%= t("downloads.show.size") %></dt>
            <dd class="font-medium text-gray-900 dark:text-white"><%= number_to_human_size(@shared_file.file_size) %></dd>
          </div>
          <div class="flex justify-between">
            <dt class="text-gray-500 dark:text-gray-400"><%= t("downloads.show.downloads_remaining") %></dt>
            <dd class="font-medium text-gray-900 dark:text-white"><%= @shared_file.downloads_remaining %></dd>
          </div>
        </dl>
      </div>

      <%= button_to t("downloads.show.download"), download_file_path(hash: @shared_file.download_hash),
          class: "w-full py-3 px-4 bg-primary hover:bg-primary-hover text-white font-semibold rounded-lg transition-colors cursor-pointer text-lg text-center",
          form: { data: { turbo: false } } %>

      <p class="mt-4 text-xs text-gray-400 dark:text-gray-500"><%= t("downloads.show.expiry_note") %></p>
    </div>
  </div>
</div>
